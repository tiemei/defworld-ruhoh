<!DOCTYPE html>
<html lang="en" xmlns:wb=“http://open.weibo.com/wb”>
  <head>
    <meta charset="utf-8">
    <title>Blogs</title>
    <meta name="description" content="博客summary">
    <meta name="author" content="tiemei">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/twitter/stylesheets/bootstrap.min.css?0.6536482180653546" type="text/css" rel="stylesheet" media="all">
<link href="/assets/twitter/stylesheets/style.css?0.6560009284243894" type="text/css" rel="stylesheet" media="all">
<link href="/assets/twitter/widgets/google_prettify/stylesheets/twitter-bootstrap.css?0.17801092787144135" type="text/css" rel="stylesheet" media="all">

 

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  <script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
  </head>

  <body>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="touxiang" href="http://weibo.com/wgdkfk">
            <img src="https://farm6.staticflickr.com/5577/14680769772_ac1af8df86.jpg" width="40" height="40" >
          </a>
          <a class="brand" href="/">tiemei</a>
          <ul class="nav">
              
                <li><a href="/categories">Categories</a></li>
              
                <li><a href="/tools">Tools</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="content">
        <div class="page-header">
  <h1>Blogs </h1>
</div>

<div class="row">
  <div class="span12">
    <h2>Latest Posts</h2>

<div class="post">
  <h3 class="title"><a href="/2014-09/spring-dispatcherservlet-and-contextloaderlistener.html">spring DispatcherServlet &amp; ContextLoaderListener</a> <span class="date">2014-09-13</span></h3>

  <p>实际上我们只要知道了servlet config和servlet conext的区别就能清楚spring中的DispatcherServlet和ContextLoaderListener有啥区别了。servlet config是单个servlet维度的，而servlet conext是整个application维度的，一个application可能有多个servlet。  </p>

<p>spring是基于servlet标准的serlvet为中心扩展的一个MVC框架（<a href="http://webx.github.io/">webx</a>以filter为中心扩展的），DispatcherServlet正是这个中心。如下图，Front Controller就是指的DispatchServlet。    </p>

<p><img src="https://farm4.staticflickr.com/3851/15218580671_18437fa8a9.jpg" alt="spring mvc">  </p>

<p>所以我们用类似这样的方式指定的实际是DispatchServlet范围内的context:  </p>

<pre><code class="xml">&lt;servlet&gt;
        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
            &lt;param-value&gt;classpath:spring-context.xml&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
&lt;/servlet&gt;
</code></pre>


  <div class="more">
    <a href="/2014-09/spring-dispatcherservlet-and-contextloaderlistener.html" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/2014-09/java-null-note.html">笔记 - 关于Java中的Null</a> <span class="date">2014-09-12</span></h3>

  <p>有人说写出NPE，是程序员的逻辑错误，我们在做code review的时候也经常提醒或者被提醒这一点，殊不知这个坑真的太容易踩了。但是如果你不辞辛劳的判断Null，你会发现你的代码变成一坨奇怪的形状，就像脸蛋白皙五官精致的姑娘被各种乱涂乱画。下面大家看看这个例子：  </p>

<pre><code class="java">computer.getSoundCard().getUsb().getVersion();
</code></pre>

<p>我们很容易被吐槽（博主经常被测试妹子吐槽这里这里检查了NPE了么），一个电脑肯定有声卡么，声卡肯定有usa插口么？然后代码变成了这样：  </p>

<pre><code class="java">if (computer != null) {
    SoundCard sc = computer.getSoundcard();
    if (sc != null) {
        Usb usb = sc.getUsb();
        if (usab != null) {
            return usb.getVersion();
        } else {
            return null;
        }      
    } else {
        return null;
    }
} else {
    return null;
}
</code></pre>


  <div class="more">
    <a href="/2014-09/java-null-note.html" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/2014-09/node-js-4-tools.html">js入门笔记（四）—— 工具</a> <span class="date">2014-09-03</span></h3>

  <h1 id="toc_0"><a href="http://gruntjs.com/getting-started">grunt</a></h1>

<p>grunt是javascript的任务运行器。  </p>

<h1 id="toc_1"><a href="https://www.npmjs.org/">npm</a></h1>

<p>npm是node.js的包管理器。  </p>

<h2 id="toc_2">常用命令</h2>

<ul>
<li><code>npm install</code>在<code>package.json</code>文件存在的目录执行，安装响应的依赖</li>
<li><code>npm install grunt --save-dev</code>将grunt的最新版本安装到工程目录，并在devDependencies中添加</li>
</ul>

<h2 id="toc_3">版本描述定义</h2>

<p>参见<a href="https://www.npmjs.org/doc/misc/semver.html">semver</a>  </p>

<h2 id="toc_4">npmrc</h2>


  <div class="more">
    <a href="/2014-09/node-js-4-tools.html" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/2014-08/huangshan.html">黄山团队三日游</a> <span class="date">2014-08-10</span></h3>

  <p>主题 - 黄山</p>

<p>黄山主要的路线就是两条，前山山后山下，后山上前山下。考虑到是团队出游，且还有没有可能还有小孩，我们主路线是：后山徒步上（后山较平缓），前山下，且前山下到玉屏楼走玉屏索道缆车下山。有妇女儿童体力欠缺者建议后山也是走云谷新索道缆车到白鹅岭再行步行。主要的时间安排是第一天早上坐车中午到黄山，下午晚上住在山脚，会准备三国杀和狼人杀。第二天早上开始登山，全天登山，晚上住光明顶，第三天从前山下。详细安排是：  </p>

<h1 id="toc_0">详细规划</h1>

<h3 id="toc_1">D1上午，杭州 -&gt; 黄山景区换乘中心</h3>

<p>早上9点阿里巴巴西溪园区发车。<br>
从杭州坐汽车或者包车到黄山景区（看映容是否能包到车）大约4h，找一户农家吃午饭。下午下榻旁边的中泰大酒店，下午可以在酒店打牌，也可去后山泡温泉。  </p>

<h3 id="toc_2">D2，云谷寺 -&gt; 白鹅岭 -&gt; 光明顶-&gt;西海大峡谷-&gt;光明顶</h3>

<p>先从换乘中心坐车到云谷寺，大约30min。<br>
从云谷寺开始就是登山的起点，山顶为光明顶。可以有几种选择，全程步行登顶或者坐缆车，是否去西海大峡谷，都是可选的，大家可根据自己体力酌情考虑。<br>
云谷寺到白鹅岭6.5km，步行3小时左右，腿力好的2.5之内应该可以搞定。<br>
从白鹅岭至光明顶至光明顶至光明顶，要2~3h，只能步行。<br>
光明顶去西海大峡谷，下山3~4h，上山4~5h，上山可选择坐缆车。<br>
一路云海天梯美女帅哥欢歌笑语不再多说。  </p>


  <div class="more">
    <a href="/2014-08/huangshan.html" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/2014-06/notes-js-1.html">js入门笔记（一）——基础</a> <span class="date">2014-06-13</span></h3>

  <h1 id="toc_0">js函数有啥特点</h1>

<ul>
<li>函数的参数实际上在内部是用一个数组表示的，在函数体内可以通过<code>arguments</code>对象访问。arguments只是跟数组类型可以通过方括号访问每一个元素，实际不是Array实例</li>
<li>函数定义的参数与实际传递的参数没有个数相等的限制，不像Java语言会编译校验这个</li>
<li>因为函数参数是由包含另零个或多个值的数组来表示的，没有函数签名，故<code>没有重载</code></li>
</ul>

<h1 id="toc_1">js基本类型和引用类型</h1>

<ul>
<li><code>基本数据类型</code>：Undefined 、 Null 、 Boolean 、 Number 、 String</li>
<li>不能给基本数据类型添加属性，添加以后访问也是undifined</li>
<li>因为String在js不同于其他语言是基本类型，所以赋值的时候会将值拷贝一份</li>
</ul>

<h3 id="toc_2">检测类型</h3>

<p><strong><code>typeof</code>区分是基本类型还是应用类型</strong>  </p>


  <div class="more">
    <a href="/2014-06/notes-js-1.html" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/2014-06/notes-js-2-object.html">js入门笔记（二）——面向对象</a> <span class="date">2014-06-13</span></h3>

  <h1 id="toc_0">直接创建一个对象</h1>

<p>ECMA-262把对象定义为<code>无需属性的结合，其属性尅包含基本值、对象或者函数</code>。</p>

<p><strong>创建自定义对象方式一——创建一个Object实例</strong> </p>

<pre><code class="js">var person = new Object();
person.name = &#39;tiemie&#39;;
person.age = 29;

person.sayName = function() {
    alert(this.name);
};
</code></pre>


  <div class="more">
    <a href="/2014-06/notes-js-2-object.html" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/2014-06/st3-debug-node-js.html">run &amp; debug node.js</a> <span class="date">2014-06-08</span></h3>

  <h1 id="toc_0">debug node.js</h1>

<ol>
<li><code>sudo npm install -g node-inspector</code></li>
<li><code>node-debug xxx.js</code></li>
<li>set breakpoints</li>
<li>request &amp; break auto</li>
</ol>

<p><strong>shortcuts</strong>  </p>

<ul>
<li>Resume script execution (F8): 继续执行</li>
<li>Step over next function call (F10): 按步执行，不进入另一个函数</li>
<li>Step into next function call (F11): 按步执行，进入另一个函数内部</li>
<li>Step out of current functino (⇧ F11): 跳出当前函数，进入父函数</li>
</ul>


  <div class="more">
    <a href="/2014-06/st3-debug-node-js.html" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/2014-06/notes-c.html">C语言入门笔记</a> <span class="date">2014-06-05</span></h3>

  <h3 id="toc_0">C语言的指针是什么？</h3>

<ul>
<li>指针中保存的是指向某个内存对象的地址<br></li>
<li><code>&amp;</code>取地址，<code>int *p</code>指向int类型的指针p，<code>*p</code>p指向的对象</li>
</ul>

<h3 id="toc_1">C语言的结构体是什么？</h3>

<ul>
<li>结构体将多个数据捆绑在一起使用</li>
</ul>

<p><strong>类型定义（typedef）</strong>  </p>

<ul>
<li>用来建立新的数据类型名</li>
<li><code>typedef int Length</code>类型Length将与int完全相同</li>
</ul>

<pre><code class="C">typedef struct tnode *Treeptr;
</code></pre>


  <div class="more">
    <a href="/2014-06/notes-c.html" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/2014-05/my-sublime-text-3-shortcuts.html">我的Sublime Text快捷键</a> <span class="date">2014-05-09</span></h3>

  <h3 id="toc_0">select</h3>

<ul>
<li><code>⌃+⌘ +G</code> find all <code>Escape</code> cancle</li>
<li><code>⌃ ⇧ ↑</code> <code>⌃ ⇧ ↓</code> column select 。需要先把系统的shortcuts绑定去掉</li>
</ul>

<h3 id="toc_1">line</h3>

<ul>
<li><code>⇧ ⌘ D</code> duplicate line</li>
<li><code>⌃ ⇧ K</code> delete line</li>
<li><code>⌃ ⌘ ↑</code>  <code>⌃ ⌘ ↓</code> swap line</li>
<li><code>⌘ ]</code> <code>⌘ [</code> line indent / unindent</li>
<li><code>⌘ ↩</code> insert line after</li>
<li><code>⇧ ⌘ ↩</code> insert line before</li>
<li><code>⌃ K</code>  <code>⌘ ⌦</code> delete to end / beginning</li>
<li><code>⌃ a</code> go to line head <code>⌃ e</code> go to line end</li>
</ul>


  <div class="more">
    <a href="/2014-05/my-sublime-text-3-shortcuts.html" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/2014-04/node-js-and-division-of-work.html">Node.js前后端分离在广告页面中的思考</a> <span class="date">2014-04-20</span></h3>

  <p>撇下Node.js社区的红火，异步I/O的相比阻塞I/O的好处，也不谈回调嵌套是否反人类，Node.js是否在“羞辱”后端程序员，我想借着这篇文字理一下Node.js在我们广告页面中能否提高合作效率和迭代速度。  </p>

<h3 id="toc_0">过去和现状</h3>

<p>我们团队维护直通车、外投外、无线等多条产品线的二跳页面，且正在接入一跳广告位。  </p>

<p>2012年我刚来团队的时候，说的简单点，主要做的事情无非就是从广告引擎、其他数据源获取数据，展示到页面上。因为公司技术环境的原因，最开始选择了webx+velocity模板，由前端工程师写静态的html页面，java工程师拿过来，把其中的动态部分用vm模板语言重写一遍，再从后端数据源把数据拿过来，几乎不会对数据进行更多的逻辑加工。加上页面几乎没有用户输入部分，基本上交互都集中在纯js/css动态效果，ajax异步数据请求和展现（没有数据输入）。  </p>

<p>可以看到这样的合作模式里，前端/后端工程师的分工是非常明确和解耦的，当然前端同学也能在这样的模式下积累可重用的js组件提交效率。但，随着粗放式增长的瓶颈，加上内部流程的制约，这样的迭代方式遇到了问题？首先，经常性的页面局部调整一般只能在下周的发布日才能完成；一次无法尝试过多版本，因为开发html改成动态模版和测试都需要资源；重复的页面模块开发；后端工程师一直在干重复枯燥的劳动，没有精力去思考如何做到流程的自动化、数据可反馈、统一解决方案的问题；当然还有多终端时代的挑战。  </p>

<p>我们做的第一次尝试，“组件化”平台，我认为实际上是做到页面搭建过程的模型化，也就是说用一种统一的模型来描述页面的逻辑，进而用线上可动态改变的配置文件来描述这个模型。显然，在后端工程师的角度，我们不再是写写数据接口，写写页面模版了，我们面对统一的页面模型，进行配置的统一生成和解析。这里可以简单说下这个模型，基于广告页面的实际业务场景，我们把页面切分成几个独立的块，每块用“动态模版+数据源配置+样式js”的方式描述，块之间的js,css依赖通过css class命名规范进行解耦，块之间的数据依赖（这样的依赖极少）通过配置上的数据传递来解决。  </p>

<p>“组件化”平台的配置化的统一模型尝试是突破性的，后端开发终于从将html改写成动态模版这样的无聊的工作中解脱了，我们也似乎看到一点平台化的统一解决方案的影子。但，因为这个配置化的模型还是过于复杂了，生成模型配置的管理系统，提供出来的配置界面(<code>http://moc.taobao.org/</code>)过于复杂，也注定了它只能给开发自己玩玩。更大的问题是，<strong>前端工程师需要写后端动态模板</strong>，调试是个大问题呀！前端们用node.js+velocity.js搭了一个调试平台，然后再用约定的接口数据格式，自己定义一些mock数据调试。这样的方式勉强可以跑通，但前端开发完页面的动的模块后，需要后端工程师在配置系统配置上数据接口和模块之间的依赖关系，然后再将模块代码上传到后端渲染系统，然后才能看到真正的动态页面长什么样。这样的合作方式，我们做出来的页面已经覆盖到淘客、直通车、外投外、淘星云等多个页面，流量也上千万了。如此多的依赖，和前端对最终运行环境的无法感知，带来不少坎坷和诡异的问题。  </p>

<h3 id="toc_1">“组件化”方案中前后端到底哪里耦合</h3>

<p>首先再反思下，我们现有的前后端解耦手段：  </p>

<ol>
<li>数据接口输出预先约定好</li>
<li>Node.js + velocity.js 搭建前端开发调试环境</li>
<li>前端控制动态模版的编写和css/js的控制</li>
<li>后端控制数据接口入参的控制，数据接口的准备，页面模块间依赖的配置，
最终配置的解析和渲染输出</li>
</ol>


  <div class="more">
    <a href="/2014-04/node-js-and-division-of-work.html" class="btn">read more..</a>
  </div>
</div>

  </div>
</div>

      </div>

      <footer>
        <p>&copy; tiemei 2012 
          with help from <a href="http://ruhoh.com" target="_blank" title="The Definitive Technical Blogging Framework">ruhoh</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
        <p>
        <script src="http://s9.cnzz.com/stat.php?id=5379369&web_id=5379369&online=1&show=line" language="JavaScript"></script>
        </p>
      </footer>

    </div> <!-- /container -->

    <!-- Google Prettify -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/188.0.0/prettify.js"></script>
<script>
  var pres = document.getElementsByTagName("pre");
  for (var i=0; i < pres.length; ++i) {
    pres[i].className = "prettyprint linenums";
  }
  prettyPrint();
</script>
<!-- end Google Prettify -->
    <script>
var clicky_site_ids = clicky_site_ids || [];
clicky_site_ids.push(defworld.com);
(function() {
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = '//static.getclicky.com/js';
  ( document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0] ).appendChild( s );
})();
</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/defworld.comns.gif" /></p></noscript>
  </body>
</html>
